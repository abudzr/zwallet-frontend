{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport style from '../../styles/history.module.css';\nimport { Pagination, PaginationItem, PaginationLink } from \"reactstrap\";\nimport { useRouter } from 'next/router';\nexport default function HistoryParts() {\n  var router = useRouter(); // const [dataIsLogin, setDataIsLogin] = useState([]);\n\n  var _useState = useState([]),\n      user = _useState[0],\n      setUser = _useState[1];\n\n  var _useState2 = useState(1),\n      page = _useState2[0],\n      setPage = _useState2[1];\n\n  var _useState3 = useState(null),\n      totalPage = _useState3[0],\n      setTotalPage = _useState3[1];\n\n  var _useState4 = useState(null),\n      currentPage = _useState4[0],\n      setCurrentPage = _useState4[1];\n\n  var _useState5 = useState(\"4\"),\n      queryLimit = _useState5[0],\n      setQueryLimit = _useState5[1];\n\n  var _useState6 = useState(\"asc\"),\n      queryOrder = _useState6[0],\n      setQueryOrder = _useState6[1];\n\n  var _useState7 = useState(\"createdAt\"),\n      querySort = _useState7[0],\n      setQuerySort = _useState7[1];\n\n  var sort = [{\n    label: \"Type\",\n    value: \"type\"\n  }, {\n    label: \"Added\",\n    value: \"createdAt\"\n  }, {\n    label: \"Amount\",\n    value: \"amount\"\n  }];\n  var order = [{\n    label: \"Ascending\",\n    value: \"ASC\"\n  }, {\n    label: \"Descending\",\n    value: \"DESC\"\n  }];\n  var limit = [{\n    label: \"Limit 1\",\n    value: \"1\"\n  }, {\n    label: \"Limit 2\",\n    value: \"2\"\n  }, {\n    label: \"Limit 4\",\n    value: \"4\"\n  }, {\n    label: \"Limit 5\",\n    value: \"5\"\n  }];\n\n  var handleClickPage = function handleClickPage(index) {\n    setPage(index + 1);\n  };\n\n  var handleClickDetail = function handleClickDetail(data) {\n    router.push(\"/history/\".concat(data));\n  };\n\n  var token;\n\n  if (true) {\n    token = localStorage.getItem(\"token\");\n  }\n\n  useEffect(function () {\n    var id = localStorage.getItem('id'); // http://localhost:8080/api/v1/transaction/user/7?page=1&perPage=2&sortBy=createdAt&order=asc\n\n    var url = \"\".concat(process.env.api, \"/transaction/user/\").concat(id, \"?page=\").concat(page, \"&perPage=\").concat(queryLimit, \"&order=\").concat(queryOrder, \"&sortBy=\").concat(querySort); // console.log(url);\n\n    axios.get(url).then(function (res) {\n      var data = res.data.data; // console.log(res.data);\n\n      setUser(data);\n      setTotalPage(res.data.totalPage);\n      setCurrentPage(res.data.currentPage);\n    })[\"catch\"](function (err) {\n      console.log(err);\n    });\n  }, [page, queryLimit, queryOrder, querySort]);\n  return /*#__PURE__*/_jsxs(\"div\", {\n    className: style['card-history'],\n    children: [/*#__PURE__*/_jsx(\"h3\", {\n      children: \"Transaction History\"\n    }), user.map(function (item, index) {\n      return /*#__PURE__*/_jsxs(\"div\", {\n        className: [['d-flex'], ['mb-3'], ['justify-content-between'], style['card-transaction-history']].join(\" \"),\n        onClick: function onClick() {\n          return handleClickDetail(item.id);\n        },\n        children: [/*#__PURE__*/_jsx(\"img\", {\n          src: \"\".concat(process.env.api_img).concat(item.image),\n          alt: \"Picture Transaction\",\n          width: 70,\n          height: 70\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: style['text-transaction'],\n          children: [/*#__PURE__*/_jsxs(\"h5\", {\n            children: [item.firstname, \" \", item.lastname]\n          }), /*#__PURE__*/_jsx(\"p\", {\n            children: item.type\n          })]\n        }), /*#__PURE__*/_jsx(\"div\", {\n          children: /*#__PURE__*/_jsx(\"h6\", {\n            className: \"\".concat(item.type === \"Transfer\" ? style['amount-transfer'] : style['amount-receiver']),\n            children: item.type === \"Transfer\" ? \"-Rp\".concat(item.amount) : \"+Rp\".concat(item.amount)\n          })\n        })]\n      }, index);\n    }), /*#__PURE__*/_jsx(\"div\", {\n      className: \"row pl-2 pl-lg-0 mt-5\",\n      children: /*#__PURE__*/_jsx(\"div\", {\n        className: \"col-12 d-flex justify-content-center\",\n        children: parseInt(totalPage) > 1 ? /*#__PURE__*/_jsxs(Pagination, {\n          \"aria-label\": \"Page navigation example\",\n          children: [/*#__PURE__*/_jsx(PaginationItem, {\n            children: /*#__PURE__*/_jsx(PaginationLink, {\n              first: true,\n              onClick: function onClick(e) {\n                return setPage(1);\n              }\n            })\n          }), Array.from(Array(totalPage).keys()).map(function (data, index) {\n            return /*#__PURE__*/_jsx(PaginationItem, {\n              active: currentPage === index + 1,\n              children: /*#__PURE__*/_jsx(PaginationLink, {\n                onClick: function onClick(e) {\n                  return handleClickPage(index);\n                },\n                children: index + 1\n              })\n            });\n          }), /*#__PURE__*/_jsx(PaginationItem, {\n            children: /*#__PURE__*/_jsx(PaginationLink, {\n              last: true,\n              onClick: function onClick(e) {\n                return setPage(totalPage);\n              }\n            })\n          })]\n        }) : \"\"\n      })\n    }), /*#__PURE__*/_jsxs(\"div\", {\n      className: \"row mt-5 ml-1 mr-1 justify-content-center\",\n      children: [/*#__PURE__*/_jsx(\"div\", {\n        className: \"col-4\",\n        children: /*#__PURE__*/_jsx(\"select\", {\n          onChange: function onChange(event) {\n            return setQuerySort(event.target.value);\n          },\n          className: \"w-100 custom-select font-weight-normal\",\n          children: sort.map(function (item, index) {\n            return /*#__PURE__*/_jsx(\"option\", {\n              value: item.value,\n              children: item.label\n            }, index);\n          })\n        })\n      }), /*#__PURE__*/_jsx(\"div\", {\n        className: \"col-4\",\n        children: /*#__PURE__*/_jsx(\"select\", {\n          onChange: function onChange(event) {\n            setQueryOrder(event.target.value);\n          },\n          className: \"w-100 custom-select\",\n          children: order.map(function (item, index) {\n            return /*#__PURE__*/_jsx(\"option\", {\n              value: item.value,\n              children: item.label\n            }, index);\n          })\n        })\n      }), /*#__PURE__*/_jsx(\"div\", {\n        className: \"col-4\",\n        children: /*#__PURE__*/_jsx(\"select\", {\n          onChange: function onChange(event) {\n            setQueryLimit(event.target.value);\n          },\n          className: \"w-100 custom-select\",\n          children: limit.map(function (item, index) {\n            return /*#__PURE__*/_jsx(\"option\", {\n              value: item.value,\n              children: item.label\n            }, index);\n          })\n        })\n      })]\n    })]\n  });\n}","map":null,"metadata":{},"sourceType":"module"}