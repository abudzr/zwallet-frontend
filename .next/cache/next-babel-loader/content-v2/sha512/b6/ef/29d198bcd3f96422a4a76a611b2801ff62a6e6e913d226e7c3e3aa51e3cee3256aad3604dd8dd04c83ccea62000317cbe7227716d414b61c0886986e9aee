{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport Layout from '../components/base/Layout';\nimport React, { useEffect, useState } from 'react';\nimport Sidebar from '../components/module/Sidebar';\nimport style from '../styles/home.module.css';\nimport { faPlus, faArrowUp, faArrowDown } from '@fortawesome/free-solid-svg-icons';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport Link from 'next/link';\nimport { useRouter } from 'next/router';\nimport axios from 'axios';\nimport { BarChart, Bar, XAxis, ResponsiveContainer } from 'recharts';\nimport Navbar from '../components/module/Navbar';\nimport Footer from '../components/module/Footer';\nimport withAuth from '../helper/authNext';\nimport Rupiah from '../helper/rupiah';\nconst data = [{\n  name: \"Sat\",\n  income: \"10000\",\n  outcome: \"\"\n}, {\n  name: \"Sun\",\n  income: \"\",\n  outcome: \"20000\"\n}, {\n  name: \"Mon\",\n  income: \"\",\n  outcome: \"\"\n}, {\n  name: \"Tue\",\n  income: \"\",\n  outcome: \"\"\n}, {\n  name: \"Wed\",\n  income: \"\",\n  outcome: \"\"\n}, {\n  name: \"Thu\",\n  income: \"\",\n  outcome: \"\"\n}, {\n  name: \"Fri\",\n  income: \"\",\n  outcome: \"\"\n}];\n\nfunction Home() {\n  const {\n    0: user,\n    1: setUser\n  } = useState([]);\n  const {\n    0: history,\n    1: setHistory\n  } = useState([]);\n  const {\n    0: income,\n    1: setIncome\n  } = useState([]);\n  const {\n    0: expense,\n    1: setExpense\n  } = useState([]);\n  const router = useRouter();\n\n  const handleHistory = () => {\n    router.push('/history');\n  };\n\n  useEffect(() => {\n    const token = localStorage.getItem('token');\n    const url = `${process.env.api}/users/find-one`;\n    axios.get(url, {\n      headers: {\n        Authorization: 'Bearer ' + token\n      }\n    }).then(res => {\n      const data = res.data.data[0]; // console.log(data);\n\n      setUser(data);\n    }).catch(err => {\n      console.log(err);\n    });\n  }, []);\n  useEffect(() => {\n    let token;\n\n    if (false) {\n      token = localStorage.getItem(\"token\");\n    }\n\n    const id = user.id;\n    const url = `${process.env.api}/transaction/income/${id}`; // console.log(url);\n\n    axios.get(url, {\n      headers: {\n        Authorization: 'Bearer ' + token\n      }\n    }).then(res => {\n      const data = res.data.data[0]; // console.log(data);\n\n      setIncome(data);\n    }).catch(err => {\n      console.log(err);\n    });\n  }, [user]);\n  useEffect(() => {\n    let token;\n\n    if (false) {\n      token = localStorage.getItem(\"token\");\n    }\n\n    const id = user.id;\n    const url = `${process.env.api}/transaction/expense/${id}`; // console.log(url);\n\n    axios.get(url, {\n      headers: {\n        Authorization: 'Bearer ' + token\n      }\n    }).then(res => {\n      const data = res.data.data[0]; // console.log(data);\n\n      setExpense(data);\n    }).catch(err => {\n      console.log(err);\n    });\n  }, [user]);\n  useEffect(() => {\n    let token;\n\n    if (false) {\n      token = localStorage.getItem(\"token\");\n    }\n\n    const id = user.id;\n    const url = `${process.env.api}/transaction/user/${id}`;\n    axios.get(url, {\n      headers: {\n        Authorization: 'Bearer ' + token\n      }\n    }).then(res => {\n      const data = res.data.data; // console.log(data);\n\n      setHistory(data);\n    }).catch(err => {\n      console.log(err);\n    });\n  }, [user]);\n  return /*#__PURE__*/_jsxs(Layout, {\n    title: \"Home | Z-wallet\",\n    children: [/*#__PURE__*/_jsx(Navbar, {}), /*#__PURE__*/_jsx(\"div\", {\n      className: \"container\",\n      children: /*#__PURE__*/_jsxs(\"div\", {\n        className: \"row\",\n        children: [/*#__PURE__*/_jsx(\"div\", {\n          className: \"col-lg-4 col-12\",\n          children: /*#__PURE__*/_jsx(Sidebar, {})\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: \"col-lg-8 col-12\",\n          children: [/*#__PURE__*/_jsx(\"div\", {\n            className: style['header-home'],\n            children: /*#__PURE__*/_jsxs(\"div\", {\n              className: \"row\",\n              children: [/*#__PURE__*/_jsxs(\"div\", {\n                className: \"col-lg-8 col-4 col-md-4\",\n                children: [/*#__PURE__*/_jsx(\"h6\", {\n                  children: \"Balance\"\n                }), /*#__PURE__*/_jsx(\"h1\", {\n                  children: Rupiah(`Rp.${user.credit}`)\n                }), /*#__PURE__*/_jsx(\"p\", {\n                  children: user.phoneNumber\n                })]\n              }), /*#__PURE__*/_jsxs(\"div\", {\n                className: \"col-lg-4 col-8 col-md-8\",\n                children: [/*#__PURE__*/_jsxs(\"div\", {\n                  className: style['card-header'],\n                  children: [/*#__PURE__*/_jsx(FontAwesomeIcon, {\n                    icon: faArrowUp,\n                    className: style.iconHeader\n                  }), /*#__PURE__*/_jsx(Link, {\n                    href: \"/transfer\",\n                    children: /*#__PURE__*/_jsx(\"a\", {\n                      children: \"Transfer\"\n                    })\n                  })]\n                }), /*#__PURE__*/_jsxs(\"div\", {\n                  className: style['card-header'],\n                  children: [/*#__PURE__*/_jsx(FontAwesomeIcon, {\n                    icon: faPlus,\n                    className: style.iconHeader\n                  }), /*#__PURE__*/_jsx(Link, {\n                    href: \"/topup\",\n                    children: /*#__PURE__*/_jsx(\"a\", {\n                      children: \"Top Up\"\n                    })\n                  })]\n                })]\n              })]\n            })\n          }), /*#__PURE__*/_jsx(\"div\", {\n            className: style['main-home'],\n            children: /*#__PURE__*/_jsxs(\"div\", {\n              className: \"row\",\n              children: [/*#__PURE__*/_jsx(\"div\", {\n                className: \"col-lg-6 col-12\",\n                children: /*#__PURE__*/_jsxs(\"div\", {\n                  className: style[\"main-chart\"],\n                  children: [/*#__PURE__*/_jsxs(\"div\", {\n                    className: \"d-flex mb-5\",\n                    children: [/*#__PURE__*/_jsxs(\"div\", {\n                      className: style['income-chart'],\n                      children: [/*#__PURE__*/_jsx(FontAwesomeIcon, {\n                        icon: faArrowDown,\n                        className: style.iconIncome\n                      }), /*#__PURE__*/_jsx(\"p\", {\n                        children: \"Income\"\n                      }), /*#__PURE__*/_jsx(\"h2\", {\n                        children: income.income == undefined ? \"Rp.0\" : Rupiah(`Rp.${income.income}`)\n                      })]\n                    }), /*#__PURE__*/_jsxs(\"div\", {\n                      className: style['expense-chart'],\n                      children: [/*#__PURE__*/_jsx(FontAwesomeIcon, {\n                        icon: faArrowUp,\n                        className: style.iconExpense\n                      }), /*#__PURE__*/_jsx(\"p\", {\n                        children: \"Expense\"\n                      }), /*#__PURE__*/_jsx(\"h2\", {\n                        children: expense.expense == undefined ? \"Rp.0\" : Rupiah(`Rp.${expense.expense}`)\n                      })]\n                    })]\n                  }), /*#__PURE__*/_jsx(ResponsiveContainer, {\n                    width: \"95%\",\n                    height: \"50%\",\n                    children: /*#__PURE__*/_jsxs(BarChart, {\n                      width: 120,\n                      height: 40,\n                      data: data,\n                      children: [/*#__PURE__*/_jsx(XAxis, {\n                        dataKey: \"name\"\n                      }), /*#__PURE__*/_jsx(Bar, {\n                        dataKey: \"income\",\n                        fill: \"#6379F4\",\n                        radius: 20\n                      }), /*#__PURE__*/_jsx(Bar, {\n                        dataKey: \"outcome\",\n                        fill: \"#9DA6B5\",\n                        radius: 20\n                      })]\n                    })\n                  })]\n                })\n              }), /*#__PURE__*/_jsx(\"div\", {\n                className: \"col-lg-6 col-12\",\n                children: /*#__PURE__*/_jsxs(\"div\", {\n                  className: style[\"main-history\"],\n                  children: [/*#__PURE__*/_jsxs(\"div\", {\n                    className: \"d-flex\",\n                    children: [/*#__PURE__*/_jsx(\"h3\", {\n                      children: \"Transaction History\"\n                    }), /*#__PURE__*/_jsx(\"h4\", {\n                      onClick: handleHistory,\n                      children: \"See all\"\n                    })]\n                  }), history.map((item, index) => {\n                    return /*#__PURE__*/_jsxs(\"div\", {\n                      className: \"d-flex mb-3 justify-content-between\",\n                      children: [/*#__PURE__*/_jsx(\"img\", {\n                        src: `${process.env.api_img}${item.image}`,\n                        alt: \"Picture feature\",\n                        width: 56,\n                        height: 56\n                      }), /*#__PURE__*/_jsxs(\"div\", {\n                        className: style['text-history-home'],\n                        children: [/*#__PURE__*/_jsx(\"h5\", {\n                          children: item.firstname\n                        }), /*#__PURE__*/_jsx(\"p\", {\n                          children: item.type\n                        })]\n                      }), /*#__PURE__*/_jsx(\"div\", {\n                        children: /*#__PURE__*/_jsx(\"h6\", {\n                          className: `${item.type === \"Transfer\" ? style['amount-transfer'] : style['amount-receiver']}`,\n                          children: item.type === \"Transfer\" ? Rupiah(item.amount) : Rupiah(item.amount)\n                        })\n                      })]\n                    }, index);\n                  })]\n                })\n              })]\n            })\n          })]\n        })]\n      })\n    }), /*#__PURE__*/_jsx(Footer, {})]\n  });\n}\n\nexport default withAuth(Home);","map":null,"metadata":{},"sourceType":"module"}