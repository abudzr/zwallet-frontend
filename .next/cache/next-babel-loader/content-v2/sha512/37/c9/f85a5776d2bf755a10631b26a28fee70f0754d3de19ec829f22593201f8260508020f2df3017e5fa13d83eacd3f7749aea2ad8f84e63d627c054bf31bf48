{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport style from '../../styles/topup.module.css';\nimport Button from '../../components/module/Button';\nimport { useRouter } from 'next/router';\nimport Swal from 'sweetalert2';\n\nfunction PartsTopUp() {\n  const router = useRouter();\n  const {\n    0: user,\n    1: setUser\n  } = useState();\n  const {\n    0: data,\n    1: setData\n  } = useState({\n    idUser: \"\",\n    amount: \"\",\n    notes: \"\"\n  });\n  const {\n    0: selectValue,\n    1: setSelectValue\n  } = useState();\n\n  const handleFormChange = event => {\n    const dataNew = _objectSpread({}, data);\n\n    dataNew[event.target.name] = event.target.value; // console.log(dataNew);\n\n    setData(dataNew);\n  };\n\n  const handleDropdownChange = e => {\n    // console.log(e.target.value);\n    setSelectValue(e.target.value);\n  };\n\n  const handleConfirm = event => {\n    event.preventDefault();\n    const url = axios.post(`${process.env.api}/transaction/user/topup`, {\n      idUser: user,\n      amount: data.amount,\n      notes: selectValue\n    }).then(res => {\n      Swal.fire({\n        title: \"Success!\",\n        text: res.data.message,\n        icon: \"success\",\n        confirmButtonText: \"Ok\",\n        confirmButtonColor: \"#6379F4\"\n      });\n      router.push('/home');\n    }).catch(err => {\n      console.log(err);\n      Swal.fire({\n        title: \"Error!\",\n        text: err.response.data.message,\n        icon: \"error\",\n        confirmButtonText: \"Ok\",\n        confirmButtonColor: \"#6379F4\"\n      });\n    });\n  };\n\n  useEffect(() => {\n    const token = localStorage.getItem('token');\n    const url = `${process.env.api}/users/find-one`;\n    axios.get(url, {\n      headers: {\n        Authorization: 'Bearer ' + token\n      }\n    }).then(res => {\n      const data = res.data.data[0];\n      console.log(res.data.data[0]);\n      setUser(data.id);\n    }).catch(err => {\n      console.log(err);\n    });\n  }, []);\n  return /*#__PURE__*/_jsx(\"div\", {\n    className: style['card-topup'],\n    children: /*#__PURE__*/_jsxs(\"div\", {\n      className: \"container\",\n      children: [/*#__PURE__*/_jsx(\"p\", {\n        children: \"Top Up\"\n      }), /*#__PURE__*/_jsxs(\"form\", {\n        className: [[\"mt-5\"], style[\"form-topup\"]].join(\" \"),\n        children: [/*#__PURE__*/_jsx(\"div\", {\n          className: \"form-group\",\n          children: /*#__PURE__*/_jsx(\"input\", {\n            type: \"number\",\n            className: [[\"form-control mt-1\"], style[\"form-control\"]].join(\" \"),\n            name: \"amount\",\n            id: \"amount\",\n            placeholder: \"Enter your amount\",\n            onChange: handleFormChange\n          })\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: \"form-group\",\n          children: /*#__PURE__*/_jsxs(\"select\", {\n            id: \"notes\",\n            name: \"notes\",\n            onChange: handleDropdownChange,\n            children: [/*#__PURE__*/_jsx(\"option\", {\n              value: \"\",\n              disabled: true,\n              selected: true,\n              children: \"Payment Method\"\n            }), /*#__PURE__*/_jsx(\"option\", {\n              value: \"atm\",\n              children: \"ATM\"\n            }), /*#__PURE__*/_jsx(\"option\", {\n              value: \"ebanking\",\n              children: \"E-Banking\"\n            }), /*#__PURE__*/_jsx(\"option\", {\n              value: \"ovo\",\n              children: \"Ovo\"\n            }), /*#__PURE__*/_jsx(\"option\", {\n              value: \"dana\",\n              children: \"Dana\"\n            })]\n          })\n        })]\n      }), /*#__PURE__*/_jsx(Button, {\n        title: \"Confirm\",\n        btn: \"btn-confirm\",\n        onClick: handleConfirm\n      })]\n    })\n  });\n}\n\nexport default PartsTopUp;","map":null,"metadata":{},"sourceType":"module"}