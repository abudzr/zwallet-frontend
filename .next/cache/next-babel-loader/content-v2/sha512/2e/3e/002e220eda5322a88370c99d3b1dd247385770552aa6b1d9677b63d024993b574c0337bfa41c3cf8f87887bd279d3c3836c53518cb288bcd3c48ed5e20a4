{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport Sidebar from '../../components/module/Sidebar';\nimport style from '../../styles/profile.module.css';\nimport { faArrowRight } from '@fortawesome/free-solid-svg-icons';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport Button from '../../components/module/Button';\nimport Layout from '../../components/base/Layout';\nimport React, { useEffect, useState, useRef } from 'react';\nimport axios from 'axios';\nimport { useRouter } from 'next/router';\nimport Navbar from '../../components/module/Navbar';\nimport Footer from '../../components/module/Footer';\nimport Swal from 'sweetalert2';\nimport withAuth from '../../helper/authNext';\n\nfunction Profile() {\n  const router = useRouter();\n  const {\n    0: user,\n    1: setUser\n  } = useState([]);\n  const {\n    0: data,\n    1: setData\n  } = useState({\n    firstname: \"\",\n    lastname: \"\"\n  });\n  const {\n    0: dataImage,\n    1: setDataImage\n  } = useState({\n    image: {}\n  });\n  const {\n    0: imgUrl,\n    1: setImgUrl\n  } = useState(`${process.env.api_img}${user.image}`);\n\n  const handlelogout = () => {\n    localStorage.clear('token');\n    router.push('/');\n  };\n\n  const handleClickPersonal = () => {\n    router.push('/profile/personal-info');\n  };\n\n  const handleChangePass = () => {\n    router.push('/profile/change-password');\n  };\n\n  const handleChangePin = () => {\n    router.push('/profile/change-pin');\n  };\n\n  const hiddenFileInput = useRef(null);\n\n  const handleClick = e => {\n    hiddenFileInput.current.click();\n  };\n\n  const handleChangeImage = event => {\n    setDataImage({\n      image: event.target.files[0]\n    });\n    console.log(event.target.files[0]); // setStatus(true);\n\n    setImgUrl(URL.createObjectURL(event.target.files[0]));\n  };\n\n  const handleFormChange = event => {\n    const userNew = _objectSpread({}, data);\n\n    userNew[event.target.name] = event.target.value; // console.log(userNew);\n\n    setData(userNew);\n  };\n\n  const handleSave = event => {\n    event.preventDefault();\n    const formData = new FormData();\n    formData.append(\"firstname\", data.firstname);\n    formData.append(\"lastname\", data.lastname);\n    formData.append(\"image\", dataImage.image);\n    const url = `${process.env.api}/users/${user.id}`; // console.log(url);\n\n    axios.patch(url, formData).then(res => {\n      // this.getPostAPI()\n      Swal.fire(\"Update Profile Success!\", \"\", \"success\");\n    }, err => {\n      if (err) {\n        Swal.fire(\" ERROR!!!\", \"Update Failed\", \"error\");\n      }\n    });\n  };\n\n  useEffect(() => {\n    const token = localStorage.getItem('token');\n    const url = `${process.env.api}/users/find-one`;\n    axios.get(url, {\n      headers: {\n        Authorization: 'Bearer ' + token\n      }\n    }).then(res => {\n      const data = res.data.data[0];\n      setUser(data);\n      setData(data);\n      setImgUrl(`${process.env.api_img}${res.data.data[0].image}`); // console.log(res.data.data[0].image);\n    }).catch(err => {\n      console.log(err);\n    });\n  }, []);\n  return /*#__PURE__*/_jsxs(Layout, {\n    title: \"Profile | Z-wallet\",\n    children: [/*#__PURE__*/_jsx(Navbar, {}), /*#__PURE__*/_jsx(\"div\", {\n      className: \"container\",\n      children: /*#__PURE__*/_jsxs(\"div\", {\n        className: \"row\",\n        children: [/*#__PURE__*/_jsx(\"div\", {\n          className: \"col-lg-4\",\n          children: /*#__PURE__*/_jsx(Sidebar, {})\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: \"col-lg-8\",\n          children: /*#__PURE__*/_jsxs(\"div\", {\n            className: style['card-profile'],\n            children: [/*#__PURE__*/_jsx(\"div\", {\n              className: style['image-user'],\n              children: /*#__PURE__*/_jsx(\"img\", {\n                src: imgUrl,\n                alt: \"Picture feature\",\n                width: 80,\n                height: 80\n              })\n            }), /*#__PURE__*/_jsxs(\"div\", {\n              className: style.editProfile,\n              children: [/*#__PURE__*/_jsx(\"img\", {\n                src: \"/images/pencil.png\",\n                alt: \"edit profile\",\n                width: 20,\n                height: 20\n              }), /*#__PURE__*/_jsx(Button, {\n                title: \"Edit\",\n                btn: \"btn-edit\",\n                toggle: \"modal\",\n                target: \"#exampleModalCenter\"\n              })]\n            }), /*#__PURE__*/_jsxs(\"h5\", {\n              children: [user.firstname, \" \", user.lastname]\n            }), /*#__PURE__*/_jsx(\"p\", {\n              children: user.phoneNumber\n            }), /*#__PURE__*/_jsxs(\"div\", {\n              className: \"d-flex\",\n              children: [/*#__PURE__*/_jsx(Button, {\n                title: \"Personal Information\",\n                btn: \"btn-profile\",\n                onClick: handleClickPersonal\n              }), /*#__PURE__*/_jsx(FontAwesomeIcon, {\n                icon: faArrowRight,\n                className: style.iconProfile\n              })]\n            }), /*#__PURE__*/_jsxs(\"div\", {\n              className: \"d-flex\",\n              children: [/*#__PURE__*/_jsx(Button, {\n                title: \"Change Password\",\n                btn: \"btn-profile\",\n                onClick: handleChangePass\n              }), /*#__PURE__*/_jsx(FontAwesomeIcon, {\n                icon: faArrowRight,\n                className: style.iconProfile\n              })]\n            }), /*#__PURE__*/_jsxs(\"div\", {\n              className: \"d-flex\",\n              children: [/*#__PURE__*/_jsx(Button, {\n                title: \"Change PIN\",\n                btn: \"btn-profile\",\n                onClick: handleChangePin\n              }), /*#__PURE__*/_jsx(FontAwesomeIcon, {\n                icon: faArrowRight,\n                className: style.iconProfile\n              })]\n            }), /*#__PURE__*/_jsx(\"div\", {\n              className: \"d-flex\",\n              children: /*#__PURE__*/_jsx(Button, {\n                title: \"Logout\",\n                btn: \"btn-profile\",\n                onClick: handlelogout\n              })\n            })]\n          })\n        })]\n      })\n    }), /*#__PURE__*/_jsx(\"div\", {\n      className: \"modal fade\",\n      id: \"exampleModalCenter\",\n      tabIndex: \"-1\",\n      \"data-backdrop\": \"false\",\n      \"aria-labelledby\": \"exampleModalCenterTitle\",\n      \"aria-hidden\": \"true\",\n      children: /*#__PURE__*/_jsx(\"div\", {\n        className: \"modal-dialog modal-dialog-centered\",\n        role: \"document\",\n        children: /*#__PURE__*/_jsxs(\"div\", {\n          className: \"modal-content\",\n          children: [/*#__PURE__*/_jsxs(\"div\", {\n            className: \"modal-header \",\n            children: [/*#__PURE__*/_jsx(\"h5\", {\n              className: \"modal-title\",\n              id: \"exampleModalLongTitle\",\n              children: \"Edit Your Profile\"\n            }), /*#__PURE__*/_jsx(\"button\", {\n              type: \"button\",\n              className: \"close\",\n              \"data-dismiss\": \"modal\",\n              \"aria-label\": \"Close\",\n              children: /*#__PURE__*/_jsx(\"span\", {\n                \"aria-hidden\": \"true\",\n                children: \"\\xD7\"\n              })\n            })]\n          }), /*#__PURE__*/_jsxs(\"div\", {\n            className: \"modal-body\",\n            children: [/*#__PURE__*/_jsx(\"div\", {\n              className: \"row justify-content-center mb-4\",\n              children: /*#__PURE__*/_jsxs(\"div\", {\n                className: style['image-user-modal'],\n                children: [/*#__PURE__*/_jsx(\"img\", {\n                  src: imgUrl,\n                  alt: \"Picture feature\",\n                  width: 90,\n                  height: 90\n                }), /*#__PURE__*/_jsx(Button, {\n                  title: \"Choose photo\",\n                  btn: \"btn-choose-picture\",\n                  onClick: handleClick\n                }), /*#__PURE__*/_jsx(\"input\", {\n                  type: \"file\",\n                  name: \"image\",\n                  ref: hiddenFileInput,\n                  onChange: event => handleChangeImage(event),\n                  style: {\n                    display: \"none\"\n                  }\n                })]\n              })\n            }), /*#__PURE__*/_jsxs(\"div\", {\n              className: \"justify-content-center\",\n              children: [/*#__PURE__*/_jsx(\"label\", {\n                htmlFor: \"firstname\",\n                children: \"First Name\"\n              }), /*#__PURE__*/_jsx(\"input\", {\n                type: \"text\",\n                className: [[\"form-control mt-1\"], style[\"form-edit-profile\"]].join(\" \"),\n                name: \"firstname\",\n                id: \"firstname\",\n                value: data.firstname,\n                onChange: handleFormChange\n              })]\n            }), /*#__PURE__*/_jsxs(\"div\", {\n              className: \"justify-content-center\",\n              children: [/*#__PURE__*/_jsx(\"label\", {\n                htmlFor: \"lastname\",\n                children: \"Last Name\"\n              }), /*#__PURE__*/_jsx(\"input\", {\n                type: \"text\",\n                className: [[\"form-control mt-1\"], style[\"form-edit-profile\"]].join(\" \"),\n                name: \"lastname\",\n                id: \"lastname\",\n                value: data.lastname,\n                onChange: handleFormChange\n              })]\n            })]\n          }), /*#__PURE__*/_jsx(\"div\", {\n            className: [[\"modal-footer\"], style[\"btn-modal\"]].join(\" \"),\n            children: /*#__PURE__*/_jsx(Button, {\n              title: \"Save Changes\",\n              btn: \"btn-continue\",\n              onClick: handleSave\n            })\n          })]\n        })\n      })\n    }), /*#__PURE__*/_jsx(Footer, {})]\n  });\n}\n\nexport default withAuth(Profile);","map":null,"metadata":{},"sourceType":"module"}