{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport style from '../../styles/history.module.css';\nimport { Pagination, PaginationItem, PaginationLink } from \"reactstrap\";\nimport { useRouter } from 'next/router';\nexport default function HistoryParts() {\n  const router = useRouter(); // const [dataIsLogin, setDataIsLogin] = useState([]);\n\n  const {\n    0: user,\n    1: setUser\n  } = useState([]);\n  const {\n    0: page,\n    1: setPage\n  } = useState(1);\n  const {\n    0: totalPage,\n    1: setTotalPage\n  } = useState(null);\n  const {\n    0: currentPage,\n    1: setCurrentPage\n  } = useState(null);\n  let {\n    0: queryLimit,\n    1: setQueryLimit\n  } = useState(\"4\");\n  let {\n    0: queryOrder,\n    1: setQueryOrder\n  } = useState(\"asc\");\n  let {\n    0: querySort,\n    1: setQuerySort\n  } = useState(\"createdAt\");\n  const sort = [{\n    label: \"Type\",\n    value: \"type\"\n  }, {\n    label: \"Added\",\n    value: \"createdAt\"\n  }, {\n    label: \"Amount\",\n    value: \"amount\"\n  }];\n  const order = [{\n    label: \"Ascending\",\n    value: \"ASC\"\n  }, {\n    label: \"Descending\",\n    value: \"DESC\"\n  }];\n  const limit = [{\n    label: \"Limit 1\",\n    value: \"1\"\n  }, {\n    label: \"Limit 2\",\n    value: \"2\"\n  }, {\n    label: \"Limit 4\",\n    value: \"4\"\n  }, {\n    label: \"Limit 5\",\n    value: \"5\"\n  }];\n\n  const handleClickPage = index => {\n    setPage(index + 1);\n  };\n\n  const handleClickDetail = data => {\n    router.push(`/history/${data}`);\n  };\n\n  let token;\n\n  if (false) {\n    token = localStorage.getItem(\"token\");\n  }\n\n  useEffect(() => {\n    const id = localStorage.getItem('id'); // http://localhost:8080/api/v1/transaction/user/7?page=1&perPage=2&sortBy=createdAt&order=asc\n\n    const url = `${process.env.api}/transaction/user/${id}?page=${page}&perPage=${queryLimit}&order=${queryOrder}&sortBy=${querySort}`; // console.log(url);\n\n    axios.get(url).then(res => {\n      const data = res.data.data; // console.log(res.data);\n\n      setUser(data);\n      setTotalPage(res.data.totalPage);\n      setCurrentPage(res.data.currentPage);\n    }).catch(err => {\n      console.log(err);\n    });\n  }, [page, queryLimit, queryOrder, querySort]);\n  return /*#__PURE__*/_jsxs(\"div\", {\n    className: style['card-history'],\n    children: [/*#__PURE__*/_jsx(\"h3\", {\n      children: \"Transaction History\"\n    }), user.map((item, index) => {\n      return /*#__PURE__*/_jsxs(\"div\", {\n        className: [['d-flex'], ['mb-3'], ['justify-content-between'], style['card-transaction-history']].join(\" \"),\n        onClick: () => handleClickDetail(item.id),\n        children: [/*#__PURE__*/_jsx(\"img\", {\n          src: `${process.env.api_img}${item.image}`,\n          alt: \"Picture Transaction\",\n          width: 70,\n          height: 70\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: style['text-transaction'],\n          children: [/*#__PURE__*/_jsxs(\"h5\", {\n            children: [item.firstname, \" \", item.lastname]\n          }), /*#__PURE__*/_jsx(\"p\", {\n            children: item.type\n          })]\n        }), /*#__PURE__*/_jsx(\"div\", {\n          children: /*#__PURE__*/_jsx(\"h6\", {\n            className: `${item.type === \"Transfer\" ? style['amount-transfer'] : style['amount-receiver']}`,\n            children: item.type === \"Transfer\" ? `-Rp${item.amount}` : `+Rp${item.amount}`\n          })\n        })]\n      }, index);\n    }), /*#__PURE__*/_jsx(\"div\", {\n      className: \"row pl-2 pl-lg-0 mt-5\",\n      children: /*#__PURE__*/_jsx(\"div\", {\n        className: \"col-12 d-flex justify-content-center\",\n        children: parseInt(totalPage) > 1 ? /*#__PURE__*/_jsxs(Pagination, {\n          \"aria-label\": \"Page navigation example\",\n          children: [/*#__PURE__*/_jsx(PaginationItem, {\n            children: /*#__PURE__*/_jsx(PaginationLink, {\n              first: true,\n              onClick: e => setPage(1)\n            })\n          }), Array.from(Array(totalPage).keys()).map((data, index) => {\n            return /*#__PURE__*/_jsx(PaginationItem, {\n              active: currentPage === index + 1,\n              children: /*#__PURE__*/_jsx(PaginationLink, {\n                onClick: e => handleClickPage(index),\n                children: index + 1\n              })\n            });\n          }), /*#__PURE__*/_jsx(PaginationItem, {\n            children: /*#__PURE__*/_jsx(PaginationLink, {\n              last: true,\n              onClick: e => setPage(totalPage)\n            })\n          })]\n        }) : \"\"\n      })\n    }), /*#__PURE__*/_jsxs(\"div\", {\n      className: \"row mt-5 ml-1 mr-1 justify-content-center\",\n      children: [/*#__PURE__*/_jsx(\"div\", {\n        className: \"col-4\",\n        children: /*#__PURE__*/_jsx(\"select\", {\n          onChange: event => setQuerySort(event.target.value),\n          className: \"w-100 custom-select font-weight-normal\",\n          children: sort.map((item, index) => {\n            return /*#__PURE__*/_jsx(\"option\", {\n              value: item.value,\n              children: item.label\n            }, index);\n          })\n        })\n      }), /*#__PURE__*/_jsx(\"div\", {\n        className: \"col-4\",\n        children: /*#__PURE__*/_jsx(\"select\", {\n          onChange: event => {\n            setQueryOrder(event.target.value);\n          },\n          className: \"w-100 custom-select\",\n          children: order.map((item, index) => {\n            return /*#__PURE__*/_jsx(\"option\", {\n              value: item.value,\n              children: item.label\n            }, index);\n          })\n        })\n      }), /*#__PURE__*/_jsx(\"div\", {\n        className: \"col-4\",\n        children: /*#__PURE__*/_jsx(\"select\", {\n          onChange: event => {\n            setQueryLimit(event.target.value);\n          },\n          className: \"w-100 custom-select\",\n          children: limit.map((item, index) => {\n            return /*#__PURE__*/_jsx(\"option\", {\n              value: item.value,\n              children: item.label\n            }, index);\n          })\n        })\n      })]\n    })]\n  });\n}","map":null,"metadata":{},"sourceType":"module"}