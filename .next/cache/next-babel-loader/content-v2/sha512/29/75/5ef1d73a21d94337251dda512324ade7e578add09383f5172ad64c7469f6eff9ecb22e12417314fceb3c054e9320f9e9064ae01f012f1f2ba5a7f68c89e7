{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport Layout from '../components/base/Layout';\nimport React, { useEffect, useState } from 'react';\nimport Sidebar from '../components/module/Sidebar';\nimport style from '../styles/home.module.css';\nimport { faPlus, faArrowUp, faArrowDown } from '@fortawesome/free-solid-svg-icons';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport Link from 'next/link';\nimport { useRouter } from 'next/router';\nimport axios from 'axios';\nimport { BarChart, Bar, XAxis, ResponsiveContainer } from 'recharts';\nimport Navbar from '../components/module/Navbar';\nimport Footer from '../components/module/Footer';\nimport withAuth from '../helper/authNext';\nimport Rupiah from '../helper/rupiah';\nvar data = [{\n  name: \"Sat\",\n  income: \"10000\",\n  outcome: \"\"\n}, {\n  name: \"Sun\",\n  income: \"\",\n  outcome: \"20000\"\n}, {\n  name: \"Mon\",\n  income: \"\",\n  outcome: \"\"\n}, {\n  name: \"Tue\",\n  income: \"\",\n  outcome: \"\"\n}, {\n  name: \"Wed\",\n  income: \"\",\n  outcome: \"\"\n}, {\n  name: \"Thu\",\n  income: \"\",\n  outcome: \"\"\n}, {\n  name: \"Fri\",\n  income: \"\",\n  outcome: \"\"\n}];\n\nfunction Home() {\n  var _useState = useState([]),\n      user = _useState[0],\n      setUser = _useState[1];\n\n  var _useState2 = useState([]),\n      history = _useState2[0],\n      setHistory = _useState2[1];\n\n  var _useState3 = useState([]),\n      income = _useState3[0],\n      setIncome = _useState3[1];\n\n  var _useState4 = useState([]),\n      expense = _useState4[0],\n      setExpense = _useState4[1];\n\n  var router = useRouter();\n\n  var handleHistory = function handleHistory() {\n    router.push('/history');\n  };\n\n  useEffect(function () {\n    var token = localStorage.getItem('token');\n    var url = \"\".concat(process.env.api, \"/users/find-one\");\n    axios.get(url, {\n      headers: {\n        Authorization: 'Bearer ' + token\n      }\n    }).then(function (res) {\n      var data = res.data.data[0]; // console.log(data);\n\n      setUser(data);\n    })[\"catch\"](function (err) {\n      console.log(err);\n    });\n  }, []);\n  useEffect(function () {\n    var token;\n\n    if (true) {\n      token = localStorage.getItem(\"token\");\n    }\n\n    var id = user.id;\n    var url = \"\".concat(process.env.api, \"/transaction/income/\").concat(id); // console.log(url);\n\n    axios.get(url, {\n      headers: {\n        Authorization: 'Bearer ' + token\n      }\n    }).then(function (res) {\n      var data = res.data.data[0]; // console.log(data);\n\n      setIncome(data);\n    })[\"catch\"](function (err) {\n      console.log(err);\n    });\n  }, [user]);\n  useEffect(function () {\n    var token;\n\n    if (true) {\n      token = localStorage.getItem(\"token\");\n    }\n\n    var id = user.id;\n    var url = \"\".concat(process.env.api, \"/transaction/expense/\").concat(id); // console.log(url);\n\n    axios.get(url, {\n      headers: {\n        Authorization: 'Bearer ' + token\n      }\n    }).then(function (res) {\n      var data = res.data.data[0]; // console.log(data);\n\n      setExpense(data);\n    })[\"catch\"](function (err) {\n      console.log(err);\n    });\n  }, [user]);\n  useEffect(function () {\n    var token;\n\n    if (true) {\n      token = localStorage.getItem(\"token\");\n    }\n\n    var id = user.id;\n    var url = \"\".concat(process.env.api, \"/transaction/user/\").concat(id);\n    axios.get(url, {\n      headers: {\n        Authorization: 'Bearer ' + token\n      }\n    }).then(function (res) {\n      var data = res.data.data; // console.log(data);\n\n      setHistory(data);\n    })[\"catch\"](function (err) {\n      console.log(err);\n    });\n  }, [user]);\n  return /*#__PURE__*/_jsxs(Layout, {\n    title: \"Home | Z-wallet\",\n    children: [/*#__PURE__*/_jsx(Navbar, {}), /*#__PURE__*/_jsx(\"div\", {\n      className: \"container\",\n      children: /*#__PURE__*/_jsxs(\"div\", {\n        className: \"row\",\n        children: [/*#__PURE__*/_jsx(\"div\", {\n          className: \"col-lg-4 col-12\",\n          children: /*#__PURE__*/_jsx(Sidebar, {})\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: \"col-lg-8 col-12\",\n          children: [/*#__PURE__*/_jsx(\"div\", {\n            className: style['header-home'],\n            children: /*#__PURE__*/_jsxs(\"div\", {\n              className: \"row\",\n              children: [/*#__PURE__*/_jsxs(\"div\", {\n                className: \"col-lg-8 col-4 col-md-4\",\n                children: [/*#__PURE__*/_jsx(\"h6\", {\n                  children: \"Balance\"\n                }), /*#__PURE__*/_jsx(\"h1\", {\n                  children: Rupiah(\"Rp.\".concat(user.credit))\n                }), /*#__PURE__*/_jsx(\"p\", {\n                  children: user.phoneNumber\n                })]\n              }), /*#__PURE__*/_jsxs(\"div\", {\n                className: \"col-lg-4 col-8 col-md-8\",\n                children: [/*#__PURE__*/_jsxs(\"div\", {\n                  className: style['card-header'],\n                  children: [/*#__PURE__*/_jsx(FontAwesomeIcon, {\n                    icon: faArrowUp,\n                    className: style.iconHeader\n                  }), /*#__PURE__*/_jsx(Link, {\n                    href: \"/transfer\",\n                    children: /*#__PURE__*/_jsx(\"a\", {\n                      children: \"Transfer\"\n                    })\n                  })]\n                }), /*#__PURE__*/_jsxs(\"div\", {\n                  className: style['card-header'],\n                  children: [/*#__PURE__*/_jsx(FontAwesomeIcon, {\n                    icon: faPlus,\n                    className: style.iconHeader\n                  }), /*#__PURE__*/_jsx(Link, {\n                    href: \"/topup\",\n                    children: /*#__PURE__*/_jsx(\"a\", {\n                      children: \"Top Up\"\n                    })\n                  })]\n                })]\n              })]\n            })\n          }), /*#__PURE__*/_jsx(\"div\", {\n            className: style['main-home'],\n            children: /*#__PURE__*/_jsxs(\"div\", {\n              className: \"row\",\n              children: [/*#__PURE__*/_jsx(\"div\", {\n                className: \"col-lg-6 col-12\",\n                children: /*#__PURE__*/_jsxs(\"div\", {\n                  className: style[\"main-chart\"],\n                  children: [/*#__PURE__*/_jsxs(\"div\", {\n                    className: \"d-flex mb-5\",\n                    children: [/*#__PURE__*/_jsxs(\"div\", {\n                      className: style['income-chart'],\n                      children: [/*#__PURE__*/_jsx(FontAwesomeIcon, {\n                        icon: faArrowDown,\n                        className: style.iconIncome\n                      }), /*#__PURE__*/_jsx(\"p\", {\n                        children: \"Income\"\n                      }), /*#__PURE__*/_jsx(\"h2\", {\n                        children: income.income == undefined ? \"Rp.0\" : Rupiah(\"Rp.\".concat(income.income))\n                      })]\n                    }), /*#__PURE__*/_jsxs(\"div\", {\n                      className: style['expense-chart'],\n                      children: [/*#__PURE__*/_jsx(FontAwesomeIcon, {\n                        icon: faArrowUp,\n                        className: style.iconExpense\n                      }), /*#__PURE__*/_jsx(\"p\", {\n                        children: \"Expense\"\n                      }), /*#__PURE__*/_jsx(\"h2\", {\n                        children: expense.expense == undefined ? \"Rp.0\" : Rupiah(\"Rp.\".concat(expense.expense))\n                      })]\n                    })]\n                  }), /*#__PURE__*/_jsx(ResponsiveContainer, {\n                    width: \"95%\",\n                    height: \"50%\",\n                    children: /*#__PURE__*/_jsxs(BarChart, {\n                      width: 120,\n                      height: 40,\n                      data: data,\n                      children: [/*#__PURE__*/_jsx(XAxis, {\n                        dataKey: \"name\"\n                      }), /*#__PURE__*/_jsx(Bar, {\n                        dataKey: \"income\",\n                        fill: \"#6379F4\",\n                        radius: 20\n                      }), /*#__PURE__*/_jsx(Bar, {\n                        dataKey: \"outcome\",\n                        fill: \"#9DA6B5\",\n                        radius: 20\n                      })]\n                    })\n                  })]\n                })\n              }), /*#__PURE__*/_jsx(\"div\", {\n                className: \"col-lg-6 col-12\",\n                children: /*#__PURE__*/_jsxs(\"div\", {\n                  className: style[\"main-history\"],\n                  children: [/*#__PURE__*/_jsxs(\"div\", {\n                    className: \"d-flex\",\n                    children: [/*#__PURE__*/_jsx(\"h3\", {\n                      children: \"Transaction History\"\n                    }), /*#__PURE__*/_jsx(\"h4\", {\n                      onClick: handleHistory,\n                      children: \"See all\"\n                    })]\n                  }), history.map(function (item, index) {\n                    return /*#__PURE__*/_jsxs(\"div\", {\n                      className: \"d-flex mb-3 justify-content-between\",\n                      children: [/*#__PURE__*/_jsx(\"img\", {\n                        src: \"\".concat(process.env.api_img).concat(item.image),\n                        alt: \"Picture feature\",\n                        width: 56,\n                        height: 56\n                      }), /*#__PURE__*/_jsxs(\"div\", {\n                        className: style['text-history-home'],\n                        children: [/*#__PURE__*/_jsx(\"h5\", {\n                          children: item.firstname\n                        }), /*#__PURE__*/_jsx(\"p\", {\n                          children: item.type\n                        })]\n                      }), /*#__PURE__*/_jsx(\"div\", {\n                        children: /*#__PURE__*/_jsx(\"h6\", {\n                          className: \"\".concat(item.type === \"Transfer\" ? style['amount-transfer'] : style['amount-receiver']),\n                          children: item.type === \"Transfer\" ? Rupiah(item.amount) : Rupiah(item.amount)\n                        })\n                      })]\n                    }, index);\n                  })]\n                })\n              })]\n            })\n          })]\n        })]\n      })\n    }), /*#__PURE__*/_jsx(Footer, {})]\n  });\n}\n\nexport default withAuth(Home);","map":null,"metadata":{},"sourceType":"module"}